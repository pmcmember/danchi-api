{"openapi":"3.0.1","info":{"description":"DANCHiサイト用のWebAPI","version":"1.0.0","title":"${self:custom.apigateway.name}","license":{"name":"Apache 2.0","url":"http://www.apache.org/licenses/LICENSE-2.0.html"}},"tags":[{"name":"musics"}],"x-amazon-apigateway-request-validators":{"basic":{"validateRequestBody":true,"validateRequestParameters":true},"params-only":{"validateRequestBody":false,"validateRequestParameters":true},"body-only":{"validateRequestBody":true,"validateRequestParameters":false}},"paths":{"/v1/musics":{"get":{"summary":"曲一覧の取得","description":"MicroCMSに登録されている曲一覧の取得","tags":["musics"],"security":[{"lambdaAuthorizer":[]},{"apiKey":[]}],"x-amazon-apigateway-request-validator":"basic","x-amazon-apigateway-integration":{"type":"aws_proxy","credentials":{"Fn::ImportValue":"${self:custom.stacks.common-stack.name}-APIGWStandardRoleArn"},"uri":{"Fn::Join":["/",["arn:aws:apigateway:${self:provider.region}:lambda:path/2015-03-31/functions",{"Fn::GetAtt":"KickRequestToMicroCMSLambdaFunction.Arn"},"invocations"]]},"passthroughBehavior":"when_no_match","httpMethod":"POST","contentHandling":"CONVERT_TO_TEXT"},"responses":{"200":{"description":"成功時のレスポンス","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{"application/json":{"schema":{"$schema":"http://json-schema.org/draft-07/schema#","definitions":{"MicroCMSContentId":{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},"MicroCMSDate":{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}},"description":"microCMS list api Response","properties":{"contents":{"items":{"allOf":[{"description":"musics APIのスキーマ\n\n注：songCategoriesは複数指定の場合改行区切りで指定される。","properties":{"rawIframe":{"type":"string"},"scApiUrl":{"type":"string"},"scArtistHref":{"type":"string"},"scArtistName":{"type":"string"},"scSongHref":{"type":"string"},"scSongTitle":{"type":"string"},"scSrc":{"type":"string"},"songCategories":{"items":{"properties":{"fieldId":{"enum":["songCategory"],"type":"string"},"songCategory":{"type":"string"}},"required":["fieldId","songCategory"],"type":"object"},"type":"array"}},"required":["rawIframe"],"type":"object"},{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}]},"type":"array"},"limit":{"type":"number"},"offset":{"type":"number"},"totalCount":{"type":"number"}},"required":["contents","limit","offset","totalCount"],"type":"object"}}}},"500":{"description":"サーバ異常終了時のレスポンス","content":{"application/json":{"schema":{"$schema":"http://json-schema.org/draft-07/schema#","properties":{"message":{"type":"string"}},"required":["message"],"type":"object"}}}}}},"options":{"summary":"APIGateway上のCORS用設定","description":"APIGateway上のCORS用設定","tags":["musics"],"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'${file(${self:custom.paths.envFile}):export.ALLOW_ORIGIN}'"},"responseTemplates":{"application/json":""}}},"requestTemplates":{"application/json":"{statusCode:200}"},"passthroughBehavior":"when_no_match","contentHandling":"CONVERT_TO_TEXT","type":"mock"}}},"/v1/musics/{id}":{"get":{"summary":"曲の取得","description":"MicroCMSに登録されている曲の取得","tags":["musics"],"security":[{"lambdaAuthorizer":[]},{"apiKey":[]}],"x-amazon-apigateway-request-validator":"basic","x-amazon-apigateway-integration":{"type":"aws_proxy","credentials":{"Fn::ImportValue":"${self:custom.stacks.common-stack.name}-APIGWStandardRoleArn"},"uri":{"Fn::Join":["/",["arn:aws:apigateway:${self:provider.region}:lambda:path/2015-03-31/functions",{"Fn::GetAtt":"KickRequestToMicroCMSLambdaFunction.Arn"},"invocations"]]},"passthroughBehavior":"when_no_match","httpMethod":"POST","contentHandling":"CONVERT_TO_TEXT"},"parameters":[{"in":"path","name":"id","type":"string","required":true,"description":"BlogのIDを指定"}],"responses":{"200":{"description":"成功時のレスポンス","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{"application/json":{"schema":{"$schema":"http://json-schema.org/draft-07/schema#","allOf":[{"description":"musics APIのスキーマ\n\n注：songCategoriesは複数指定の場合改行区切りで指定される。","properties":{"rawIframe":{"type":"string"},"scApiUrl":{"type":"string"},"scArtistHref":{"type":"string"},"scArtistName":{"type":"string"},"scSongHref":{"type":"string"},"scSongTitle":{"type":"string"},"scSrc":{"type":"string"},"songCategories":{"items":{"properties":{"fieldId":{"enum":["songCategory"],"type":"string"},"songCategory":{"type":"string"}},"required":["fieldId","songCategory"],"type":"object"},"type":"array"}},"required":["rawIframe"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}],"definitions":{"MicroCMSDate":{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}}}}}},"500":{"description":"サーバ異常終了時のレスポンス","content":{"application/json":{"schema":{"$schema":"http://json-schema.org/draft-07/schema#","properties":{"message":{"type":"string"}},"required":["message"],"type":"object"}}}}}},"options":{"summary":"APIGateway上のCORS用設定","description":"APIGateway上のCORS用設定","tags":["musics"],"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'${file(${self:custom.paths.envFile}):export.ALLOW_ORIGIN}'"},"responseTemplates":{"application/json":""}}},"requestTemplates":{"application/json":"{statusCode:200}"},"passthroughBehavior":"when_no_match","contentHandling":"CONVERT_TO_TEXT","type":"mock"}}},"/v1/musics/iframe-converter":{"post":{"summary":"Musics Iframe変換","description":"SoundCloudから入手した生Iframe(共有タブに記載されているものそのまま)から情報を抜き取り、musics情報を更新する","tags":["musics"],"security":[{"lambdaAuthorizer":[]},{"apiKey":[]}],"x-amazon-apigateway-request-validator":"basic","x-amazon-apigateway-integration":{"type":"aws_proxy","credentials":{"Fn::ImportValue":"${self:custom.stacks.common-stack.name}-APIGWStandardRoleArn"},"uri":{"Fn::Join":["/",["arn:aws:apigateway:${self:provider.region}:lambda:path/2015-03-31/functions",{"Fn::GetAtt":"IframeConverterLambdaFunction.Arn"},"invocations"]]},"passthroughBehavior":"when_no_match","httpMethod":"POST","contentHandling":"CONVERT_TO_TEXT"},"requestBody":{"content":{"application/json":{"schema":{"$schema":"http://json-schema.org/draft-07/schema#","definitions":{"MicroCMSContentId":{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},"MicroCMSDate":{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}},"properties":{"api":{"type":"string"},"contents":{"properties":{"new":{"properties":{"draftKey":{"type":"string"},"draftValue":{"allOf":[{"description":"musics APIのスキーマ\n\n注：songCategoriesは複数指定の場合改行区切りで指定される。","properties":{"rawIframe":{"type":"string"},"scApiUrl":{"type":"string"},"scArtistHref":{"type":"string"},"scArtistName":{"type":"string"},"scSongHref":{"type":"string"},"scSongTitle":{"type":"string"},"scSrc":{"type":"string"},"songCategories":{"items":{"properties":{"fieldId":{"enum":["songCategory"],"type":"string"},"songCategory":{"type":"string"}},"required":["fieldId","songCategory"],"type":"object"},"type":"array"}},"required":["rawIframe"],"type":"object"},{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}]},"id":{"type":"string"},"publishValue":{"allOf":[{"description":"musics APIのスキーマ\n\n注：songCategoriesは複数指定の場合改行区切りで指定される。","properties":{"rawIframe":{"type":"string"},"scApiUrl":{"type":"string"},"scArtistHref":{"type":"string"},"scArtistName":{"type":"string"},"scSongHref":{"type":"string"},"scSongTitle":{"type":"string"},"scSrc":{"type":"string"},"songCategories":{"items":{"properties":{"fieldId":{"enum":["songCategory"],"type":"string"},"songCategory":{"type":"string"}},"required":["fieldId","songCategory"],"type":"object"},"type":"array"}},"required":["rawIframe"],"type":"object"},{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}]},"status":{"items":{"enum":["DRAFT","PUBLISH"],"type":"string"},"type":"array"}},"required":["draftKey","draftValue","id","publishValue","status"],"type":"object"},"old":{"properties":{"draftKey":{"type":"string"},"draftValue":{"allOf":[{"description":"musics APIのスキーマ\n\n注：songCategoriesは複数指定の場合改行区切りで指定される。","properties":{"rawIframe":{"type":"string"},"scApiUrl":{"type":"string"},"scArtistHref":{"type":"string"},"scArtistName":{"type":"string"},"scSongHref":{"type":"string"},"scSongTitle":{"type":"string"},"scSrc":{"type":"string"},"songCategories":{"items":{"properties":{"fieldId":{"enum":["songCategory"],"type":"string"},"songCategory":{"type":"string"}},"required":["fieldId","songCategory"],"type":"object"},"type":"array"}},"required":["rawIframe"],"type":"object"},{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}]},"id":{"type":"string"},"publishValue":{"allOf":[{"description":"musics APIのスキーマ\n\n注：songCategoriesは複数指定の場合改行区切りで指定される。","properties":{"rawIframe":{"type":"string"},"scApiUrl":{"type":"string"},"scArtistHref":{"type":"string"},"scArtistName":{"type":"string"},"scSongHref":{"type":"string"},"scSongTitle":{"type":"string"},"scSrc":{"type":"string"},"songCategories":{"items":{"properties":{"fieldId":{"enum":["songCategory"],"type":"string"},"songCategory":{"type":"string"}},"required":["fieldId","songCategory"],"type":"object"},"type":"array"}},"required":["rawIframe"],"type":"object"},{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}]},"status":{"items":{"enum":["DRAFT","PUBLISH"],"type":"string"},"type":"array"}},"required":["draftKey","draftValue","id","publishValue","status"],"type":"object"}},"required":["new","old"],"type":"object"},"id":{"type":"string"},"service":{"type":"string"},"type":{"type":"string"}},"required":["api","contents","id","service","type"],"type":"object"}}}},"responses":{"200":{"description":"成功時のレスポンス","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{"application/json":{"schema":{"$schema":"http://json-schema.org/draft-07/schema#","properties":{"message":{"type":"string"}},"required":["message"],"type":"object"}}}},"500":{"description":"サーバ異常終了時のレスポンス","content":{"application/json":{"schema":{"$schema":"http://json-schema.org/draft-07/schema#","properties":{"message":{"type":"string"}},"required":["message"],"type":"object"}}}}}},"options":{"summary":"APIGateway上のCORS用設定","description":"APIGateway上のCORS用設定","tags":["musics"],"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'${file(${self:custom.paths.envFile}):export.ALLOW_ORIGIN}'"},"responseTemplates":{"application/json":""}}},"requestTemplates":{"application/json":"{statusCode:200}"},"passthroughBehavior":"when_no_match","contentHandling":"CONVERT_TO_TEXT","type":"mock"}}},"/v1/blogs":{"get":{"summary":"ブログ記事一覧の取得","description":"MicroCMSに登録されているブログ記事一覧の取得","tags":["blogs"],"security":[{"lambdaAuthorizer":[]},{"apiKey":[]}],"x-amazon-apigateway-request-validator":"basic","x-amazon-apigateway-integration":{"type":"aws_proxy","credentials":{"Fn::ImportValue":"${self:custom.stacks.common-stack.name}-APIGWStandardRoleArn"},"uri":{"Fn::Join":["/",["arn:aws:apigateway:${self:provider.region}:lambda:path/2015-03-31/functions",{"Fn::GetAtt":"KickRequestToMicroCMSLambdaFunction.Arn"},"invocations"]]},"passthroughBehavior":"when_no_match","httpMethod":"POST","contentHandling":"CONVERT_TO_TEXT"},"responses":{"200":{"description":"成功時のレスポンス","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{"application/json":{"schema":{"$schema":"http://json-schema.org/draft-07/schema#","definitions":{"MicroCMSContentId":{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},"MicroCMSDate":{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"},"MicroCMSImage":{"description":"microCMS image","properties":{"height":{"type":"number"},"url":{"type":"string"},"width":{"type":"number"}},"required":["url"],"type":"object"}},"description":"microCMS list api Response","properties":{"contents":{"items":{"allOf":[{"description":"blogs APIのスキーマ\n\n注：tagsは複数指定の場合改行区切りで指定される。","properties":{"author":{"items":{"type":"string"},"type":"array"},"categories":{"items":{"type":"string"},"type":"array"},"content":{"type":"string"},"description":{"type":"string"},"image":{"description":"microCMS image","properties":{"height":{"type":"number"},"url":{"type":"string"},"width":{"type":"number"}},"required":["url"],"type":"object"},"tags":{"items":{"properties":{"fieldId":{"enum":["tag"],"type":"string"},"tag":{"type":"string"}},"required":["fieldId","tag"],"type":"object"},"type":"array"},"title":{"type":"string"}},"required":["author","categories","content","description","title"],"type":"object"},{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}]},"type":"array"},"limit":{"type":"number"},"offset":{"type":"number"},"totalCount":{"type":"number"}},"required":["contents","limit","offset","totalCount"],"type":"object"}}}},"500":{"description":"サーバ異常終了時のレスポンス","content":{"application/json":{"schema":{"$schema":"http://json-schema.org/draft-07/schema#","properties":{"message":{"type":"string"}},"required":["message"],"type":"object"}}}}}},"options":{"summary":"APIGateway上のCORS用設定","description":"APIGateway上のCORS用設定","tags":["blogs"],"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'${file(${self:custom.paths.envFile}):export.ALLOW_ORIGIN}'"},"responseTemplates":{"application/json":""}}},"requestTemplates":{"application/json":"{statusCode:200}"},"passthroughBehavior":"when_no_match","contentHandling":"CONVERT_TO_TEXT","type":"mock"}}},"/v1/blogs/{id}":{"get":{"summary":"ブログ記事の取得","description":"MicroCMSに登録されているブログ記事の取得","tags":["blogs"],"security":[{"lambdaAuthorizer":[]},{"apiKey":[]}],"x-amazon-apigateway-request-validator":"basic","x-amazon-apigateway-integration":{"type":"aws_proxy","credentials":{"Fn::ImportValue":"${self:custom.stacks.common-stack.name}-APIGWStandardRoleArn"},"uri":{"Fn::Join":["/",["arn:aws:apigateway:${self:provider.region}:lambda:path/2015-03-31/functions",{"Fn::GetAtt":"KickRequestToMicroCMSLambdaFunction.Arn"},"invocations"]]},"passthroughBehavior":"when_no_match","httpMethod":"POST","contentHandling":"CONVERT_TO_TEXT"},"parameters":[{"in":"path","name":"id","type":"string","required":true,"description":"BlogのIDを指定"}],"responses":{"200":{"description":"成功時のレスポンス","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{"application/json":{"schema":{"$schema":"http://json-schema.org/draft-07/schema#","allOf":[{"description":"blogs APIのスキーマ\n\n注：tagsは複数指定の場合改行区切りで指定される。","properties":{"author":{"items":{"type":"string"},"type":"array"},"categories":{"items":{"type":"string"},"type":"array"},"content":{"type":"string"},"description":{"type":"string"},"image":{"description":"microCMS image","properties":{"height":{"type":"number"},"url":{"type":"string"},"width":{"type":"number"}},"required":["url"],"type":"object"},"tags":{"items":{"properties":{"fieldId":{"enum":["tag"],"type":"string"},"tag":{"type":"string"}},"required":["fieldId","tag"],"type":"object"},"type":"array"},"title":{"type":"string"}},"required":["author","categories","content","description","title"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}],"definitions":{"MicroCMSDate":{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"},"MicroCMSImage":{"description":"microCMS image","properties":{"height":{"type":"number"},"url":{"type":"string"},"width":{"type":"number"}},"required":["url"],"type":"object"}}}}}},"500":{"description":"サーバ異常終了時のレスポンス","content":{"application/json":{"schema":{"$schema":"http://json-schema.org/draft-07/schema#","properties":{"message":{"type":"string"}},"required":["message"],"type":"object"}}}}}},"options":{"summary":"APIGateway上のCORS用設定","description":"APIGateway上のCORS用設定","tags":["blogs"],"responses":{"200":{"description":"200 response","headers":{"Access-Control-Allow-Origin":{"schema":{"type":"string"}},"Access-Control-Allow-Methods":{"schema":{"type":"string"}},"Access-Control-Allow-Headers":{"schema":{"type":"string"}}},"content":{}}},"x-amazon-apigateway-integration":{"responses":{"default":{"statusCode":"200","responseParameters":{"method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET'","method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'${file(${self:custom.paths.envFile}):export.ALLOW_ORIGIN}'"},"responseTemplates":{"application/json":""}}},"requestTemplates":{"application/json":"{statusCode:200}"},"passthroughBehavior":"when_no_match","contentHandling":"CONVERT_TO_TEXT","type":"mock"}}}},"components":{"schemas":{"MusicsIframeConverterRequest":{"$schema":"http://json-schema.org/draft-07/schema#","definitions":{"MicroCMSContentId":{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},"MicroCMSDate":{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}},"properties":{"api":{"type":"string"},"contents":{"properties":{"new":{"properties":{"draftKey":{"type":"string"},"draftValue":{"allOf":[{"description":"musics APIのスキーマ\n\n注：songCategoriesは複数指定の場合改行区切りで指定される。","properties":{"rawIframe":{"type":"string"},"scApiUrl":{"type":"string"},"scArtistHref":{"type":"string"},"scArtistName":{"type":"string"},"scSongHref":{"type":"string"},"scSongTitle":{"type":"string"},"scSrc":{"type":"string"},"songCategories":{"items":{"properties":{"fieldId":{"enum":["songCategory"],"type":"string"},"songCategory":{"type":"string"}},"required":["fieldId","songCategory"],"type":"object"},"type":"array"}},"required":["rawIframe"],"type":"object"},{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}]},"id":{"type":"string"},"publishValue":{"allOf":[{"description":"musics APIのスキーマ\n\n注：songCategoriesは複数指定の場合改行区切りで指定される。","properties":{"rawIframe":{"type":"string"},"scApiUrl":{"type":"string"},"scArtistHref":{"type":"string"},"scArtistName":{"type":"string"},"scSongHref":{"type":"string"},"scSongTitle":{"type":"string"},"scSrc":{"type":"string"},"songCategories":{"items":{"properties":{"fieldId":{"enum":["songCategory"],"type":"string"},"songCategory":{"type":"string"}},"required":["fieldId","songCategory"],"type":"object"},"type":"array"}},"required":["rawIframe"],"type":"object"},{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}]},"status":{"items":{"enum":["DRAFT","PUBLISH"],"type":"string"},"type":"array"}},"required":["draftKey","draftValue","id","publishValue","status"],"type":"object"},"old":{"properties":{"draftKey":{"type":"string"},"draftValue":{"allOf":[{"description":"musics APIのスキーマ\n\n注：songCategoriesは複数指定の場合改行区切りで指定される。","properties":{"rawIframe":{"type":"string"},"scApiUrl":{"type":"string"},"scArtistHref":{"type":"string"},"scArtistName":{"type":"string"},"scSongHref":{"type":"string"},"scSongTitle":{"type":"string"},"scSrc":{"type":"string"},"songCategories":{"items":{"properties":{"fieldId":{"enum":["songCategory"],"type":"string"},"songCategory":{"type":"string"}},"required":["fieldId","songCategory"],"type":"object"},"type":"array"}},"required":["rawIframe"],"type":"object"},{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}]},"id":{"type":"string"},"publishValue":{"allOf":[{"description":"musics APIのスキーマ\n\n注：songCategoriesは複数指定の場合改行区切りで指定される。","properties":{"rawIframe":{"type":"string"},"scApiUrl":{"type":"string"},"scArtistHref":{"type":"string"},"scArtistName":{"type":"string"},"scSongHref":{"type":"string"},"scSongTitle":{"type":"string"},"scSrc":{"type":"string"},"songCategories":{"items":{"properties":{"fieldId":{"enum":["songCategory"],"type":"string"},"songCategory":{"type":"string"}},"required":["fieldId","songCategory"],"type":"object"},"type":"array"}},"required":["rawIframe"],"type":"object"},{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}]},"status":{"items":{"enum":["DRAFT","PUBLISH"],"type":"string"},"type":"array"}},"required":["draftKey","draftValue","id","publishValue","status"],"type":"object"}},"required":["new","old"],"type":"object"},"id":{"type":"string"},"service":{"type":"string"},"type":{"type":"string"}},"required":["api","contents","id","service","type"],"type":"object"},"StandardResponse":{"$schema":"http://json-schema.org/draft-07/schema#","properties":{"message":{"type":"string"}},"required":["message"],"type":"object"},"BlogsResultList":{"$schema":"http://json-schema.org/draft-07/schema#","definitions":{"MicroCMSContentId":{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},"MicroCMSDate":{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"},"MicroCMSImage":{"description":"microCMS image","properties":{"height":{"type":"number"},"url":{"type":"string"},"width":{"type":"number"}},"required":["url"],"type":"object"}},"description":"microCMS list api Response","properties":{"contents":{"items":{"allOf":[{"description":"blogs APIのスキーマ\n\n注：tagsは複数指定の場合改行区切りで指定される。","properties":{"author":{"items":{"type":"string"},"type":"array"},"categories":{"items":{"type":"string"},"type":"array"},"content":{"type":"string"},"description":{"type":"string"},"image":{"description":"microCMS image","properties":{"height":{"type":"number"},"url":{"type":"string"},"width":{"type":"number"}},"required":["url"],"type":"object"},"tags":{"items":{"properties":{"fieldId":{"enum":["tag"],"type":"string"},"tag":{"type":"string"}},"required":["fieldId","tag"],"type":"object"},"type":"array"},"title":{"type":"string"}},"required":["author","categories","content","description","title"],"type":"object"},{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}]},"type":"array"},"limit":{"type":"number"},"offset":{"type":"number"},"totalCount":{"type":"number"}},"required":["contents","limit","offset","totalCount"],"type":"object"},"BlogsResult":{"$schema":"http://json-schema.org/draft-07/schema#","allOf":[{"description":"blogs APIのスキーマ\n\n注：tagsは複数指定の場合改行区切りで指定される。","properties":{"author":{"items":{"type":"string"},"type":"array"},"categories":{"items":{"type":"string"},"type":"array"},"content":{"type":"string"},"description":{"type":"string"},"image":{"description":"microCMS image","properties":{"height":{"type":"number"},"url":{"type":"string"},"width":{"type":"number"}},"required":["url"],"type":"object"},"tags":{"items":{"properties":{"fieldId":{"enum":["tag"],"type":"string"},"tag":{"type":"string"}},"required":["fieldId","tag"],"type":"object"},"type":"array"},"title":{"type":"string"}},"required":["author","categories","content","description","title"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}],"definitions":{"MicroCMSDate":{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"},"MicroCMSImage":{"description":"microCMS image","properties":{"height":{"type":"number"},"url":{"type":"string"},"width":{"type":"number"}},"required":["url"],"type":"object"}}},"MusicsResultList":{"$schema":"http://json-schema.org/draft-07/schema#","definitions":{"MicroCMSContentId":{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},"MicroCMSDate":{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}},"description":"microCMS list api Response","properties":{"contents":{"items":{"allOf":[{"description":"musics APIのスキーマ\n\n注：songCategoriesは複数指定の場合改行区切りで指定される。","properties":{"rawIframe":{"type":"string"},"scApiUrl":{"type":"string"},"scArtistHref":{"type":"string"},"scArtistName":{"type":"string"},"scSongHref":{"type":"string"},"scSongTitle":{"type":"string"},"scSrc":{"type":"string"},"songCategories":{"items":{"properties":{"fieldId":{"enum":["songCategory"],"type":"string"},"songCategory":{"type":"string"}},"required":["fieldId","songCategory"],"type":"object"},"type":"array"}},"required":["rawIframe"],"type":"object"},{"description":"microCMS contentId\nhttps://document.microcms.io/manual/content-id-setting","properties":{"id":{"type":"string"}},"required":["id"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}]},"type":"array"},"limit":{"type":"number"},"offset":{"type":"number"},"totalCount":{"type":"number"}},"required":["contents","limit","offset","totalCount"],"type":"object"},"MusicsResult":{"$schema":"http://json-schema.org/draft-07/schema#","allOf":[{"description":"musics APIのスキーマ\n\n注：songCategoriesは複数指定の場合改行区切りで指定される。","properties":{"rawIframe":{"type":"string"},"scApiUrl":{"type":"string"},"scArtistHref":{"type":"string"},"scArtistName":{"type":"string"},"scSongHref":{"type":"string"},"scSongTitle":{"type":"string"},"scSrc":{"type":"string"},"songCategories":{"items":{"properties":{"fieldId":{"enum":["songCategory"],"type":"string"},"songCategory":{"type":"string"}},"required":["fieldId","songCategory"],"type":"object"},"type":"array"}},"required":["rawIframe"],"type":"object"},{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}],"definitions":{"MicroCMSDate":{"description":"microCMS content common date","properties":{"createdAt":{"type":"string"},"publishedAt":{"type":"string"},"revisedAt":{"type":"string"},"updatedAt":{"type":"string"}},"required":["createdAt","publishedAt","revisedAt","updatedAt"],"type":"object"}}},"MusicsSchema":{"$schema":"http://json-schema.org/draft-07/schema#","description":"musics APIのスキーマ\n\n注：songCategoriesは複数指定の場合改行区切りで指定される。","properties":{"rawIframe":{"type":"string"},"scApiUrl":{"type":"string"},"scArtistHref":{"type":"string"},"scArtistName":{"type":"string"},"scSongHref":{"type":"string"},"scSongTitle":{"type":"string"},"scSrc":{"type":"string"},"songCategories":{"items":{"properties":{"fieldId":{"enum":["songCategory"],"type":"string"},"songCategory":{"type":"string"}},"required":["fieldId","songCategory"],"type":"object"},"type":"array"}},"required":["rawIframe"],"type":"object"},"BlogsSchema":{"$schema":"http://json-schema.org/draft-07/schema#","definitions":{"MicroCMSImage":{"description":"microCMS image","properties":{"height":{"type":"number"},"url":{"type":"string"},"width":{"type":"number"}},"required":["url"],"type":"object"}},"description":"blogs APIのスキーマ\n\n注：tagsは複数指定の場合改行区切りで指定される。","properties":{"author":{"items":{"type":"string"},"type":"array"},"categories":{"items":{"type":"string"},"type":"array"},"content":{"type":"string"},"description":{"type":"string"},"image":{"description":"microCMS image","properties":{"height":{"type":"number"},"url":{"type":"string"},"width":{"type":"number"}},"required":["url"],"type":"object"},"tags":{"items":{"properties":{"fieldId":{"enum":["tag"],"type":"string"},"tag":{"type":"string"}},"required":["fieldId","tag"],"type":"object"},"type":"array"},"title":{"type":"string"}},"required":["author","categories","content","description","title"],"type":"object"},"MicroCMSQueries":{"$schema":"http://json-schema.org/draft-07/schema#","description":"microCMS queries\nhttps://document.microcms.io/content-api/get-list-contents#h9ce528688c\nhttps://document.microcms.io/content-api/get-content#h9ce528688c","properties":{"depth":{"enum":[1,2,3],"type":"number"},"draftKey":{"type":"string"},"fields":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"string"}]},"filters":{"type":"string"},"ids":{"anyOf":[{"items":{"type":"string"},"type":"array"},{"type":"string"}]},"limit":{"type":"number"},"offset":{"type":"number"},"orders":{"type":"string"},"q":{"type":"string"}},"type":"object"}},"securitySchemes":{"apiKey":{"type":"apiKey","name":"x-api-key","in":"header","x-amazon-apigateway-api-key-source":"header"},"lambdaAuthorizer":{"type":"apiKey","name":"X-Custom-Authorization","in":"header","x-amazon-apigateway-authtype":"custom","x-amazon-apigateway-authorizer":{"type":"request","identitySource":"method.request.header.X-Custom-Authorization","authorizerUri":{"Fn::Join":["/",["arn:aws:apigateway:${self:provider.region}:lambda:path/2015-03-31/functions",{"Fn::GetAtt":"LambdaAuthorizerLambdaFunction.Arn"},"invocations"]]},"authorizerResultTtlInSeconds":0}}}}}